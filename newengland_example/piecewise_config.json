{ 
    "piecewise_version" : "1.0",
    "database_uri" : "postgresql+psycopg2://postgres:@/piecewise",
    "cache_table_name": "results",
    "aggregations": [{
        "name": "by_county",
        "statistics_table_name": "county_statistics",
        "bins": [
            { "type" : "spatial_join", "table" : "newengland", "geometry_column" : "wkb_geometry", "key" : "geoid", "key_type" : "string" ,"join_custom_data" : true },
            { "type" : "time_slices", "resolution" : "month" },
            { "type" : "isp_bins", "maxmind_table" : "maxmind", 
                "rewrites" : {
                    "186":["186 Communications, LLC"],
		    "ABRY":["ABRY Partners"],
		    "accessplus":["AccessPlus Communications"],
		    "argent":["Argent Communications"],
		    "aroostook":["Aroostook Technologies Inc."],
		    "att":["AT&T Inc."],
		    "axiom":["Axiom Technologies"],
		    "beeline":["Bee Line, Inc."],
		    "biddeford":["Biddeford Internet Corporation"],
		    "braintree":["Braintree Electric Light Department"],
		    "broadview":["Broadview Networks Holdings, Inc."],
		    "burlington":["Burlington Telecom"],
		    "charter":["Charter Communications"],
		    "chebeague":["Chebeague.net"],
		    "christian":["Christian Hill Farm, LLC"],
		    "holyoke":["City of Holyoke Gas & Electric Department"],
		    "cloud":["Cloud Alliance LLC"],
		    "cogent":["Cogent Communications Group"],
		    "comcast":["Comcast Corporation"],
		    "connednet":["Connecticut Education Network"],
		    "cornerstone":["CornerStone Telephone Company, LLC"],
		    "coxcomm":["Cox Communications, Inc."],
		    "csc":["CSC Holdings"],
		    "cyberpine":["Cyberpine Cooperative, Inc."],
		    "dunbarton":["Dunbarton Telephone Company, Inc."],
		    "duncan":["Duncan Cable"],
		    "EarthLink":["EarthLink"],
		    "eastVT":["East Central VT Community Fiber Network"],
		    "eznorth":["EZ North"],
		    "fairpoint":["FairPoint Communications, Inc."],
		    "fastroads":["FastRoads, LLC."],
		    "fibertech":["Fibertech Networks, LLC"],
		    "franklin":["Franklin Telephone Co., Inc."],
		    "fullchannel":["Full Channel TV"],
		    "g4":["G4 Communications"],
		    "gaw":["GAW High-Speed Internet"],
		    "globalnet":["GlobalNet"],
		    "harron":["Harron Communications LP"],
		    "hussey":["Hussey Communications"],
		    "lakes":["Lakes Region Wireless"],
		    "level3":["Level 3 Communications, LLC"],
		    "lict":["LICT Corporation"],
		    "lightower":["Lightower Fiber Networks"],
		    "lightyear":["Lightyear Network Solutions"],
		    "lincolnville":["Lincolnville Telephone Company"],
		    "merrill":["Merrill Information Systems"],
		    "metropcs":["MetroPCS Wireless"],
		    "mvwifi":["MVWiFi, LLC"],
		    "nepsk":["NEPSK, Inc."],
		    "netblazr":["netBlazr Inc."],
		    "networkmaine":["Networkmaine"],
		    "newedge":["New Edge Holding Company"],
		    "northbranch":["North Branch Networks, LLC"],
		    "northcountrybb":["North Country Broadband"],
		    "northcountrycomm":["North Country Communications"],
		    "one":["One Communications Corporation"],
		    "otelco":["Otelco Inc."],
		    "oxford":["Oxford Telephone and Telegraph"],
		    "pioneer":["Pioneer Wireless"],
		    "platinum":["Platinum Equity, LLC"],
		    "premium":["Premium Choice Broadband"],
		    "princeton":["Princeton Municipal Light Department"],
		    "redzone":["RedZone Wireless"],
		    "segtel":["segTEL, Inc."],
		    "selectronics":["Selectronics Corporation"],
		    "smugglers":["Smugglers Notch Water Company"],
		    "sputhernvtbb":["Southern Vermont Broadband Cooperative"],
		    "southernvtcb":["Southern Vermont Cable Company"],
		    "sovernet":["Sovernet Communications"],
		    "spectra":["Spectra Access"],
		    "sprint":["Sprint Nextel Corporation"],
		    "stowe":["Stowe Cablevision"],
		    "tamworth":["Tamworth Wireless Cooperative"],
		    "taunton":["Taunton Municipal Lighting Plant"],
		    "telephone":["Telephone and Data Systems, Inc."],
		    "teljet":["TelJet Longhaul LLC"],
		    "thames":["Thames Valley Communications, Inc."],
		    "ocean":["The Ocean State Higher Education Economic Development and Administrative Network (OSHEAN)"],
		    "twc":["Time Warner Cable Inc."],
		    "tmobile":["T-Mobile"],
		    "topsham":["Topsham Telephone Company"],
		    "norwood":["Town of Norwood"],
		    "russell":["Town of Russell"],
		    "shrewsbury":["Town of Shrewsbury"],
		    "warwick":["Town of Warwick"],
		    "transvideo":["Trans-Video, Inc."],
		    "river":["Union River Telephone Company"],
		    "unitek":["UniTek, Inc."],
		    "unitel":["Unitel"],
		    "usainet":["USAi.net, Inc."],
		    "utel":["Utel, Inc."],
		    "verizon":["Verizon Communications Inc."],
		    "vtnational":["Vermont National Telephone Company"],
		    "wavecomm":["WaveComm"],
		    "wirelessvt":["WirelessVT Solutions"],
		    "wispring":["WiSpring"],
		    "xoholdings":["XO Holdings, Inc."],
		    "xpress":["Xpress America Internet"],
		    "yankee":["Yankee Telecom, Inc."],
		    "zayo":["Zayo Group, LLC"]
                } }
        ],
        "statistics": [
            { "type" : "AverageRTT" },
            { "type" : "MedianRTT" },
            { "type" : "DownloadCount" },
            { "type" : "AverageDownload" },
            { "type" : "MedianDownload" },
            { "type" : "UploadCount" },
            { "type" : "AverageUpload" },
            { "type" : "MedianUpload" }
        ]
    }],
    "filters": [
        { "type": "temporal", "after": "Jan 1 2014 00:00:00", "before" : "Apr 1 2015 00:00:00" },
        { "type": "bbox", "bbox": [-73.804831028,40.9328920598,-66.8516998291,47.4672094343] },
         { "type": "raw", "query": "connection_spec.data_direction IS NOT NULL" },
        { "type": "raw", "query": "web100_log_entry.is_last_entry == true" },
        { "type": "raw", "query": "project == 0" },
        { "type": "raw", "query": "(web100_log_entry.snap.HCThruOctetsAcked >= 8192 OR web100_log_entry.snap.HCThruOctetsReceived >= 8192)" },
        { "type": "raw", "query": "(web100_log_entry.snap.State == 1 OR (web100_log_entry.snap.State >= 5 AND web100_log_entry.snap.State <= 11))" },
        { "type": "raw", "query": "((web100_log_entry.snap.SndLimTimeRwin + web100_log_entry.snap.SndLimTimeCwnd + web100_log_entry.snap.SndLimTimeSnd) >= 9000000 OR web100_log_entry.snap.Duration >= 9000000)" },
        { "type": "raw", "query": "((web100_log_entry.snap.SndLimTimeRwin + web100_log_entry.snap.SndLimTimeCwnd + web100_log_entry.snap.SndLimTimeSnd) < 3600000000 OR web100_log_entry.snap.Duration < 3600000000)" }
    ]
}
